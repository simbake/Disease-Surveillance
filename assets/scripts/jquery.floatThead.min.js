/**
 * @author Kariuki
 */
// @preserve jQuery.floatThead 1.2.3 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2014 Misha Koryak
// @license Licensed under http://creativecommons.org/licenses/by-sa/4.0/
!function(a){function b(a,b){j.bind("resize.floatTHead",f.debounce(b,a))}function c(a){window.console&&window.console&&window.console.log&&window.console.log(a)}function d(){var b=a('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>');a("body").append(b);var c=b.innerWidth(),d=a("div",b).innerWidth();return b.remove(),c-d}function e(a){if(a.dataTableSettings)for(var b=0;b<a.dataTableSettings.length;b++){var c=a.dataTableSettings[b].nTable;if(a[0]==c)return!0}return!1}a.floatThead=a.floatThead||{},a.floatThead.defaults={cellTag:"th:visible",zIndex:1001,debounceResizeMs:1,useAbsolutePositioning:!0,scrollingTop:0,scrollingBottom:0,scrollContainer:function(){return a([])},getSizingRow:function(a){return a.find("tbody tr:visible:first>td")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,debug:!1};var f=window._,g=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><i><![endif]-->",c[0];);return a>4?a:document.documentMode}(),h=null,i=function(){if(g)return!1;var b=a("<table><colgroup><col></colgroup><tbody><tr><td style='width:10px'></td></tbody></table>");a("body").append(b);var c=b.find("col").width();return b.remove(),0==c},j=a(window),k=0;a.fn.floatThead=function(l){if(l=l||{},!f&&(f=window._||a.floatThead._,!f))throw new Error("jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore.");if(8>g)return this;if(null==h&&(h=i(),h&&(document.createElement("fthtr"),document.createElement("fthtd"),document.createElement("fthfoot"))),f.isString(l)){var m=l,n=this;return this.filter("table").each(function(){var b=a(this).data("floatThead-attached");if(b&&f.isFunction(b[m])){var c=b[m]();"undefined"!=typeof c&&(n=c)}}),n}var o=a.extend({},a.floatThead.defaults||{},l);return a.each(l,function(b,d){d in a.floatThead.defaults||!o.debug||c("jQuery.floatThead: used ["+d+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+f.keys(a.floatThead.defaults).join(", "))}),this.filter(":not(."+o.floatTableClass+")").each(function(){function c(){var a=x.find(o.cellTag).outerHeight(!0);U.outerHeight(a),V.outerHeight(a)}function i(){var a=w.outerWidth(),b=F.width()||a;if(S.width(b-C.vertical),L){var c=100*a/(b-C.vertical);O.css("width",c+"%")}else O.outerWidth(a)}function l(){z=(f.isFunction(o.scrollingTop)?o.scrollingTop(w):o.scrollingTop)||0,A=(f.isFunction(o.scrollingBottom)?o.scrollingBottom(w):o.scrollingBottom)||0}function m(){var b=x.find("tr:first>"+o.cellTag),c=0;if(b.each(function(){c+=parseInt(a(this).attr("colspan")||1,10)}),c!=E){E=c;for(var d=[],e=[],f=[],g=0;c>g;g++)d.push('<th class="floatThead-col"/>'),e.push("<col/>"),f.push("<fthtd style='display:table-cell;height:0;width:auto;'/>");e=e.join(""),d=d.join(""),h&&(f=f.join(""),R.html(f),Y=R.find("fthtd")),U.html(d),V=U.find("th"),Q.html(e),W=Q.find("col"),P.html(e),X=P.find("col")}return c}function n(){B||(B=!0,w.css(_),O.css(_),O.append(x),y.before(T),c())}function p(){B&&(B=!1,T.detach(),w.prepend(x),w.css(ab),O.css(ab))}function q(a){G!=a&&(G=a,S.css({position:G?"absolute":"fixed"}))}function r(a,b,c,d){return h?c:d?o.getSizingRow(a,b,c):b}function s(){var a,b=m();return function(){var d=r(w,W,Y,g);if(d.length==b&&b>0){for(p(),a=0;b>a;a++){var e=d.get(a),f=e.offsetWidth;X.eq(a).width(f),W.eq(a).width(f)}n()}else O.append(x),w.css(ab),O.css(ab),c()}}function t(){var a,b=F.scrollTop(),c=0,d=I?H.outerHeight(!0):0,e=J?d:-d,f=S.height(),g=w.offset();if(L){var i=F.offset();c=g.top-i.top+b,I&&J&&(c+=d)}else a=g.top-z-f+A+C.horizontal;var k=j.scrollTop(),l=j.scrollLeft(),m=F.scrollLeft();return b=F.scrollTop(),function(i){if("windowScroll"==i?(k=j.scrollTop(),l=j.scrollLeft()):"containerScroll"==i?(b=F.scrollTop(),m=F.scrollLeft()):"init"!=i&&(k=j.scrollTop(),l=j.scrollLeft(),b=F.scrollTop(),m=F.scrollLeft()),!h||!(0>k||0>l)){if(N)"windowScrollDone"==i?q(!0):q(!1);else if("windowScrollDone"==i)return null;g=w.offset(),I&&J&&(g.top+=d);var o,r,s;if(L&&G){if(c>=b){var t=c-b;t=t>0?t:0,o=t}else o=M?0:b;r=0}else!L&&G?(s=w.outerHeight(),k>a+s+e?o=s-f+e:g.top>k+z?(o=0,p()):(o=z+k-g.top+c+(J?d:0),n()),r=0):L&&!G?(c>b?(o=g.top-k,p()):(o=g.top+b-k-c,n()),r=g.left+m-l):L||G||(s=w.outerHeight(),k>a+s+e?o=s+z-k+a+e:g.top>k+z?(o=g.top-k,n()):o=z,r=g.left-l);return{top:o,left:r}}}}function u(){var a=null,b=null,d=null;return function(e,f,g){null==e||a==e.top&&b==e.left||(S.css({top:e.top,left:e.left}),a=e.top,b=e.left),f&&i(),g&&c();var h=F.scrollLeft();d!=h&&(S.scrollLeft(h),d=h)}}function v(){F.length&&(C.horizontal=F.width()<w.width()?D:0,C.vertical=F.height()<w.height()?D:0)}var w=a(this);if(w.data("floatThead-attached"))return!0;if(!w.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');var x=w.find("thead:first"),y=w.find("tbody:first");if(0==x.length)throw new Error("jQuery.floatThead must be run on a table that contains a <thead> element");var z,A,B=!1,C={vertical:0,horizontal:0},D=d(),E=0,F=o.scrollContainer(w)||a([]),G=o.useAbsolutePositioning;null==G&&(G=o.scrollContainer(w).length);var H=w.find("caption"),I=1==H.length;if(I)var J="top"===(H.css("caption-side")||H.attr("align")||"top");var K=a('<fthfoot style="display:table-footer-group;"/>'),L=F.length>0,M=!1,N=9>=g&&!L&&G,O=a("<table/>"),P=a("<colgroup/>"),Q=a("<colgroup/>"),R=a('<fthrow style="display:table-row;height:0;"/>'),S=a('<div style="overflow: hidden;"></div>'),T=a("<thead/>"),U=a('<tr class="size-row"/>'),V=a([]),W=a([]),X=a([]),Y=a([]);if(T.append(U),w.prepend(Q),h&&(K.append(R),w.append(K)),O.append(P),S.append(O),o.copyTableClass&&O.attr("class",w.attr("class")),O.attr({cellpadding:w.attr("cellpadding"),cellspacing:w.attr("cellspacing"),border:w.attr("border")}),O.addClass(o.floatTableClass).css("margin",0),G){var Z=function(a,b){var c=a.css("position"),d="relative"==c||"absolute"==c;if(!d||b){var e={paddingLeft:a.css("paddingLeft"),paddingRight:a.css("paddingRight")};S.css(e),a=a.wrap("<div class='"+o.floatWrapperClass+"' style='position: relative; clear:both;'></div>").parent(),M=!0}return a};if(L){var $=Z(F,!0);$.append(S)}else Z(w),w.after(S)}else w.after(S);S.css({position:G?"absolute":"fixed",marginTop:0,top:G?0:"auto",zIndex:o.zIndex}),S.addClass(o.floatContainerClass),l();var _={"table-layout":"fixed"},ab={"table-layout":w.css("tableLayout")||"auto"};v();var bb,cb=function(){(bb=s())()};cb();var db=t(),eb=u();eb(db("init"),!0);var fb=f.debounce(function(){eb(db("windowScrollDone"),!1)},300),gb=function(){eb(db("windowScroll"),!1),fb()},hb=function(){eb(db("containerScroll"),!1)},ib=function(){l(),v(),cb(),db=t(),(eb=u())(db("resize"),!0,!0)},jb=f.debounce(function(){v(),l(),cb(),db=t(),eb(db("reflow"),!0)},1);L?G?F.bind("scroll.floatTHead",hb):(F.bind("scroll.floatTHead",hb),j.bind("scroll.floatTHead",gb)):j.bind("scroll.floatTHead",gb),j.bind("load.floatTHead",jb),b(o.debounceResizeMs,ib),w.bind("reflow",jb),e(w)&&w.bind("filter",jb).bind("sort",jb).bind("page",jb),w.data("floatThead-attached",{destroy:function(){w.css(ab),Q.remove(),h&&K.remove(),T.parent().length&&T.replaceWith(x),w.unbind("reflow"),jb=ib=hb=gb=function(){},F.unbind("scroll.floatTHead"),S.remove(),w.data("floatThead-attached",!1),k--,0==k&&(j.unbind("scroll.floatTHead"),j.unbind("resize.floatTHead"),j.unbind("load.floatTHead"))},reflow:function(){jb()},setHeaderHeight:function(){c()},getFloatContainer:function(){return S},getRowGroups:function(){return B?S.find("thead").add(w.find("tbody,tfoot")):w.find("thead,tbody,tfoot")}}),k++}),this}}(jQuery),function(){$.floatThead=$.floatThead||{},$.floatThead._=window._||function(){var a={},b=Object.prototype.hasOwnProperty,c=["Arguments","Function","String","Number","Date","RegExp"];return a.has=function(a,c){return b.call(a,c)},a.keys=function(b){if(b!==Object(b))throw new TypeError("Invalid object");var c=[];for(var d in b)a.has(b,d)&&c.push(d);return c},$.each(c,function(){var b=this;a["is"+b]=function(a){return Object.prototype.toString.call(a)=="[object "+b+"]"}}),a.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},a}()}();